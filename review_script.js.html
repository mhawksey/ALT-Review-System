<script>
  $(function() {
      if (review_token === "undefined"){
        $('.modal').modal();
        $('#modal1').modal('open');
      }
      google.script.run.withSuccessHandler(setReview)
      .getReviewData(review_token, reviewer_token, reviewer_num);
      
      function setReview(data){
        updateFields(data);
        if (data.review_status){
          $('#'+data.review_status).removeClass('grey')
        }
        console.log(data)
      }
      
      $('[id^=review_]').on('click', function(e) {
        $('[id^=review_]').prop("disabled", true).addClass('grey');
        $('.progress').show();
        var type = $(e.currentTarget).prop("id");
        google.script.run.withSuccessHandler(reviewHandler)
                     .setReviewerStatus(review_token, reviewer_token, reviewer_num, type);
      });
      
      function reviewHandler(data){
        $('.progress').hide();
        $('[id^=review_]').prop("disabled", false)
        $('#'+data.review_status).removeClass('grey');
      }
      
      $('.tooltipped').tooltip();
  });
</script>